# ุณูุฑ ุนูู ุชุญุฏูุซ ูููุงุช ุงูุฃุจุญุงุซ

## ูุธุฑุฉ ุนุงูุฉ
ุชู ุชุญุฏูุซ ุงููุธุงู ููุณูุงุญ ููุฃุฏูู ูุงููุญุฑุฑ ุจุชุนุฏูู ูููุงุช ุงูุฃุจุญุงุซ ูุจู ุชุนููู ุงููุญููููุ ูุน ููุน ุงูุชุนุฏูู ุจุนุฏ ุงูุชุนููู ูุญูุงูุฉ ูููุฉ ุงูุจุงุญุซ.

## ๐ ุณูุฑ ุงูุนูู ุงูุฌุฏูุฏ

### ุงููุฑุญูุฉ 1: ูุจู ุชุนููู ุงููุญูููู
```
1. ุงูุจุงุญุซ ูุฑูุน ุงูุจุญุซ
   โ
2. ุงูุจุญุซ ูุตุจุญ "ุชุญุช ุงููุฑุงุฌุนุฉ" (under-review)
   โ
3. ุงูุฃุฏูู/ุงููุญุฑุฑ ูุฑุงุฌุน ุงูุจุญุซ
   โ
4. โ ุงูุฃุฏูู/ุงููุญุฑุฑ ููููู ุชุนุฏูู ุงูููู
   (ูุซู: ุฅุฒุงูุฉ ุงุณู ุงูุจุงุญุซุ ุชูุณูู ุงููููุ ุฅุถุงูุฉ ุฑูู ุงูุจุญุซ)
   โ
5. ุงูุฃุฏูู/ุงููุญุฑุฑ ูุนูู ุงููุญูููู
   โ
6. ๐ ุงูููู ูุตุจุญ ูุญูู (ูุง ูููู ุชุนุฏููู)
```

### ุงููุฑุญูุฉ 2: ุจุนุฏ ุชุนููู ุงููุญูููู
```
ุงููุญูู ูุณุชูู ุงูุจุญุซ
   โ
ุงููุญูู ูุญูู ููุฑุงุฌุน ุงูุจุญุซ
   โ
ุงููุญูู ูููู ุงูุจุญุซ
   โ
โ ุงูุฃุฏูู/ุงููุญุฑุฑ ูุง ูููููู ุชุนุฏูู ุงูููู
โ ุงููุญูู ูุง ููููู ุฑุคูุฉ ูููุฉ ุงูุจุงุญุซ
```

### ุงููุฑุญูุฉ 3: ุจุนุฏ ุงููุจูู/ุงููุดุฑ
```
ุงูุจุญุซ ูุชู ูุจููู
   โ
โ ุงูุฃุฏูู/ุงููุญุฑุฑ ูููููู ุชุนุฏูู ุงูููู ูุฑุฉ ุฃุฎุฑู
   (ูุฅุถุงูุฉ ุงูุบูุงูุ ุงูุชูุณูู ุงูููุงุฆูุ ุฑูู ุงูุนุฏุฏ)
```

## ๐ ุฌุฏูู ุงูุตูุงุญูุงุช ุงููุญุฏุซ

| ุงููุฑุญูุฉ | ุงูุจุงุญุซ | ุงููุญูู | ุงููุญุฑุฑ | ุงูุฃุฏูู | ุงููุฏู |
|---------|--------|--------|---------|--------|-------|
| **ูุจู ุชุนููู ุงููุญูููู** | โ | โ | โ | โ | ุฅุฒุงูุฉ ูุนูููุงุช ุงูุจุงุญุซ |
| **ุจุนุฏ ุชุนููู ุงููุญูููู** | โ | โ | โ | โ | ุญูุงูุฉ ูููุฉ ุงูุจุงุญุซ |
| **ุจุนุฏ ุงููุจูู/ุงููุดุฑ** | โ | โ | โ | โ | ุฅุถุงูุฉ ุงูุบูุงู ูุงูุชูุณูู |

## ๐จ ุงูุชุญุฏูุซุงุช ูู Frontend

### ุตูุญุฉ ุชูุงุตูู ุงูุจุญุซ (EditorResearchDetailsPage)

#### 1. ุฒุฑ ุชุญุฏูุซ ุงูููู
**ุงูุดุฑุท ุงููุฏูู:**
```typescript
{(research.status === 'accepted' || research.status === 'published') && (
  <button>ุชุญุฏูุซ ููู ุงูุจุญุซ</button>
)}
```

**ุงูุดุฑุท ุงูุฌุฏูุฏ:**
```typescript
{(assignments.length === 0 || 
  research.status === 'accepted' ||
  research.status === 'published') && (
  <button>
    {assignments.length === 0 
      ? 'ุชุญุฏูุซ ููู ุงูุจุญุซ (ูุจู ุชุนููู ุงููุญูููู)'
      : 'ุชุญุฏูุซ ููู ุงูุจุญุซ (ุฅุถุงูุฉ ุงูุบูุงู ูุงูุชูุณูู)'}
  </button>
)}
```

**ุงููุงุฆุฏุฉ:**
- โ ูุธูุฑ ุงูุฒุฑ ุนูุฏูุง ูุง ููุฌุฏ ูุญูููู ูุนูููู
- โ ูุธูุฑ ุงูุฒุฑ ุจุนุฏ ุงููุจูู/ุงููุดุฑ
- โ ูุต ุงูุฒุฑ ูุชุบูุฑ ุญุณุจ ุงูุณูุงู

#### 2. ุฑุณุงุฆู ุงูุชูุจูู ูู Modal

**ุนูุฏูุง ูุง ููุฌุฏ ูุญูููู (assignments.length === 0):**
```
โ๏ธ ูุนูููุงุช ูููุฉ (ุฎูููุฉ ุตูุฑุงุก)
- ุณูุชู ุงุณุชุจุฏุงู ุงูููู ุงูุญุงูู ุจุงูููู ุงูุฌุฏูุฏ
- ููููู ุชุนุฏูู ุงูููู ุงูุขู ูุฅุฒุงูุฉ ูุนูููุงุช ุงูุจุงุญุซ ูุจู ุชุนููู ุงููุญูููู
- โ๏ธ ุจุนุฏ ุชุนููู ุงููุญููููุ ูู ูููู ุชุนุฏูู ุงูููู (ูุญูุงูุฉ ูููุฉ ุงูุจุงุญุซ)
- ุณูุชู ุฅุฑุณุงู ุฅุดุนุงุฑ ููุจุงุญุซ ุจุชุญุฏูุซ ุงูููู
- ุงูููู ุงููุฏุนูู: PDF ุฃู Word (ุญุชู 10 ููุฌุงุจุงูุช)
```

**ุจุนุฏ ุงููุจูู/ุงููุดุฑ:**
```
โน๏ธ ูุนูููุงุช ูููุฉ (ุฎูููุฉ ุฒุฑูุงุก)
- ุณูุชู ุงุณุชุจุฏุงู ุงูููู ุงูุญุงูู ุจุงูููู ุงูุฌุฏูุฏ
- ููููู ุฅุถุงูุฉ ุงูุบูุงู ูุงูุชูุณูู ุงูููุงุฆู ููุจุญุซ
- ุณูุชู ุฅุฑุณุงู ุฅุดุนุงุฑ ููุจุงุญุซ ุจุชุญุฏูุซ ุงูููู
- ุงูููู ุงููุฏุนูู: PDF ุฃู Word (ุญุชู 10 ููุฌุงุจุงูุช)
```

#### 3. ุฅุดุนุงุฑ ูู ูุณู ุงููุญูููู

**ุนูุฏูุง ูุง ููุฌุฏ ูุญูููู ูุนูููู:**
```
โ๏ธ ุชูุจูู ููู
ููููู ุชุนุฏูู ููู ุงูุจุญุซ ุงูุขู ูุฅุฒุงูุฉ ูุนูููุงุช ุงูุจุงุญุซ. 
ุจุนุฏ ุชุนููู ุงููุญููููุ ูู ูููู ุชุนุฏูู ุงูููู ูุญูุงูุฉ ูููุฉ ุงูุจุงุญุซ.
```

## ๐ ุงูุญูุงูุฉ ูู Backend

### ResearchService.updateResearchFile()

```typescript
// Check if reviewers have been assigned
const reviewerAssignments = await this.researchRepository.manager.query(
  `SELECT COUNT(*) as count FROM reviewer_assignment WHERE research_id = $1`,
  [research_id]
);

const hasReviewers = reviewerAssignments[0]?.count > 0;

if (hasReviewers) {
  throw new ForbiddenException(
    'ูุง ูููู ุชุนุฏูู ุงูููู ุจุนุฏ ุชุนููู ุงููุญูููู. ูุฐุง ุงูุฅุฌุฑุงุก ูุญูุงูุฉ ูููุฉ ุงูุจุงุญุซ.'
  );
}
```

**ุงููุงุฆุฏุฉ:**
- โ ุญูุงูุฉ ูู ุฌุงูุจ ุงูุฎุงุฏู
- โ ูุง ูููู ุชุฌุงูุฒูุง ูู Frontend
- โ ุฑุณุงูุฉ ุฎุทุฃ ูุงุถุญุฉ

## ๐ ุญุงูุงุช ุงูุงุณุชุฎุฏุงู

### ุญุงูุฉ 1: ุชุนุฏูู ุงูููู ูุจู ุงูุชุญููู
```
ุงูุณููุงุฑูู: ุงูุจุงุญุซ ูุณู ุฅุฒุงูุฉ ุงุณูู ูู ุงูููู
ุงูุญู:
1. ุงูุฃุฏูู ููุชุญ ุตูุญุฉ ุชูุงุตูู ุงูุจุญุซ
2. ูุฑู ุฅุดุนุงุฑ: "ููููู ุชุนุฏูู ููู ุงูุจุญุซ ุงูุขู"
3. ูุถุบุท ุนูู "ุชุญุฏูุซ ููู ุงูุจุญุซ (ูุจู ุชุนููู ุงููุญูููู)"
4. ูุฑูุน ูุณุฎุฉ ูุนุฏูุฉ ุจุฏูู ุงุณู ุงูุจุงุญุซ
5. ูุนูู ุงููุญูููู
6. โ ุงููุญูู ูุญุตู ุนูู ููู ุจุฏูู ูุนูููุงุช ุงูุจุงุญุซ
```

### ุญุงูุฉ 2: ูุญุงููุฉ ุชุนุฏูู ุงูููู ุจุนุฏ ุงูุชุญููู
```
ุงูุณููุงุฑูู: ุงูุฃุฏูู ูุฑูุฏ ุชุนุฏูู ุงูููู ุจุนุฏ ุชุนููู ุงููุญูููู
ุงููุชูุฌุฉ:
1. ุงูุฃุฏูู ููุชุญ ุตูุญุฉ ุชูุงุตูู ุงูุจุญุซ
2. โ ูุง ูุฑู ุฒุฑ "ุชุญุฏูุซ ููู ุงูุจุญุซ"
3. ุฅุฐุง ุญุงูู ุนุจุฑ API ูุจุงุดุฑุฉ:
   - โ Backend ูุฑูุถ ุงูุทูุจ
   - ุฑุณุงูุฉ: "ูุง ูููู ุชุนุฏูู ุงูููู ุจุนุฏ ุชุนููู ุงููุญูููู"
```

### ุญุงูุฉ 3: ุชุนุฏูู ุงูููู ุจุนุฏ ุงููุจูู
```
ุงูุณููุงุฑูู: ุฅุถุงูุฉ ุบูุงู ุงููุฌูุฉ ููุจุญุซ ุงูููุจูู
ุงูุญู:
1. ุงูุฃุฏูู ููุชุญ ุตูุญุฉ ุงูุจุญุซ ุงูููุจูู
2. ูุฑู ุฒุฑ "ุชุญุฏูุซ ููู ุงูุจุญุซ (ุฅุถุงูุฉ ุงูุบูุงู ูุงูุชูุณูู)"
3. ูุฑูุน ูุณุฎุฉ ูุน ุงูุบูุงู
4. โ ุงูููู ูุชู ุชุญุฏูุซู ุจูุฌุงุญ
```

## ๐ฏ ุงูููุงุฆุฏ

### 1. ุญูุงูุฉ ูููุฉ ุงูุจุงุญุซ
- โ ุงูุฃุฏูู ููููู ุฅุฒุงูุฉ ูุนูููุงุช ุงูุจุงุญุซ ูุจู ุงูุชุญููู
- โ ุงููุญูู ูุง ููููู ุฑุคูุฉ ุฃู ุชุนุฏูู ุงูููู
- โ ุงูููู ูุญูู ุจุนุฏ ูุตููู ูููุญูููู

### 2. ูุฑููุฉ ูู ุงูุฅุฏุงุฑุฉ
- โ ุงูุฃุฏูู ููููู ุชุนุฏูู ุงูููู ูุจู ุงูุชุญููู
- โ ุงูุฃุฏูู ููููู ุชุนุฏูู ุงูููู ุจุนุฏ ุงููุจูู
- โ ุฑุณุงุฆู ูุงุถุญุฉ ุชูุถุญ ูุชู ูููู ุงูุชุนุฏูู

### 3. ุดูุงููุฉ
- โ ุฅุดุนุงุฑุงุช ูุงุถุญุฉ ููุฃุฏูู
- โ ุฑุณุงุฆู ุฎุทุฃ ูููููุฉ
- โ ุชูุซูู ูุงูู ููุนูููุฉ

## ๐ ุงูุฅุญุตุงุฆูุงุช

### ุงููููุงุช ุงููุนุฏูุฉ
- โ๏ธ `apps/backend/src/modules/research/research.controller.ts`
- โ๏ธ `apps/backend/src/modules/research/research.service.ts`
- โ๏ธ `apps/frontend/src/pages/dashboard/editor-admin/EditorResearchDetailsPage.tsx`
- โ๏ธ `apps/frontend/src/pages/dashboard/reviewer/EvaluationFormPage.tsx`
- โ๏ธ `apps/frontend/src/services/researchService.ts`

### ุงููุซุงุฆู ุงููุถุงูุฉ
- ๐ `RESEARCHER_PRIVACY_PROTECTION.md`
- ๐ `FILE_UPDATE_WORKFLOW.md` (ูุฐุง ุงูููู)
- ๐ `EMAIL_NOTIFICATIONS_GUIDE.md`

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุณููุงุฑูููุงุช ุงูุงุฎุชุจุงุฑ

#### โ Test 1: ุชุนุฏูู ุงูููู ูุจู ุชุนููู ุงููุญูููู
```
Given: ุจุญุซ ุชุญุช ุงููุฑุงุฌุนุฉ ุจุฏูู ูุญูููู
When: ุงูุฃุฏูู ูุญุงูู ุชุนุฏูู ุงูููู
Then: โ ูุฌุจ ุฃู ููุฌุญ
```

#### โ Test 2: ููุน ุงูุชุนุฏูู ุจุนุฏ ุชุนููู ุงููุญูููู
```
Given: ุจุญุซ ุชุญุช ุงููุฑุงุฌุนุฉ ูุน ูุญูููู ูุนูููู
When: ุงูุฃุฏูู ูุญุงูู ุชุนุฏูู ุงูููู
Then: โ ูุฌุจ ุฃู ููุดู ูุน ุฑุณุงูุฉ ุฎุทุฃ
```

#### โ Test 3: ุชุนุฏูู ุงูููู ุจุนุฏ ุงููุจูู
```
Given: ุจุญุซ ููุจูู
When: ุงูุฃุฏูู ูุญุงูู ุชุนุฏูู ุงูููู
Then: โ ูุฌุจ ุฃู ููุฌุญ
```

#### โ Test 4: ุงููุญูู ูุง ูุฑู ุฎูุงุฑ ุงูุชุนุฏูู
```
Given: ูุญูู ูุนูู ูุจุญุซ
When: ุงููุญูู ููุชุญ ุตูุญุฉ ุงูุชูููู
Then: โ ูุง ููุฌุฏ ุฎูุงุฑ ูุชุนุฏูู ุงูููู
```

## ๐ ุฃูุถู ุงูููุงุฑุณุงุช

### ููุฃุฏูู/ุงููุญุฑุฑ:
1. **ูุจู ุชุนููู ุงููุญูููู:**
   - ุฑุงุฌุน ุงูููู ุจุนูุงูุฉ
   - ุฃุฒู ุฌููุน ูุนูููุงุช ุงูุจุงุญุซ (ุงูุงุณูุ ุงูุจุฑูุฏุ ุงูุฌุงูุนุฉ)
   - ุชุฃูุฏ ูู ุงูุชูุณูู ุงูุณููู
   - ุฃุถู ุฑูู ุงูุจุญุซ ุฅุฐุง ูุฒู ุงูุฃูุฑ

2. **ุจุนุฏ ุงููุจูู:**
   - ุฃุถู ุบูุงู ุงููุฌูุฉ
   - ุฃุถู ุฑูู ุงูุนุฏุฏ ูุงูุตูุญุงุช
   - ุชุฃูุฏ ูู ุงูุชูุณูู ุงูููุงุฆู

### ูููุทูุฑูู:
1. **ุนูุฏ ุฅุถุงูุฉ ููุฒุงุช ุฌุฏูุฏุฉ:**
   - ุชุญูู ูู ุนุฏุฏ ุงููุญูููู ุงููุนูููู
   - ุงุญุชุฑู ูููุฏ ุงูุฎุตูุตูุฉ
   - ุฃุถู ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ

2. **ุนูุฏ ุชุนุฏูู ุตูุงุญูุงุช:**
   - ุญุฏุซ Backend ู Frontend ูุนุงู
   - ุฃุถู ุงุฎุชุจุงุฑุงุช ููุณููุงุฑูููุงุช ุงูุฌุฏูุฏุฉ
   - ูุซู ุงูุชุบููุฑุงุช

## ๐ ุฑูุงุจุท ุฐุงุช ุตูุฉ

- [ุญูุงูุฉ ูููุฉ ุงูุจุงุญุซ](./RESEARCHER_PRIVACY_PROTECTION.md)
- [ูุธุงู ุงูุฅุดุนุงุฑุงุช](./EMAIL_NOTIFICATIONS_GUIDE.md)
- [ูุธุงู ุงูุฏูุน](./MEMORY[6c97d87e-627f-4482-bcba-ac0c7457fbfe])

## ๐ ุงูุฏุนู

ูู ุญุงูุฉ ูุฌูุฏ ูุดุงูู:
1. ุชุญูู ูู ุนุฏุฏ ุงููุญูููู ุงููุนูููู
2. ุชุญูู ูู ุญุงูุฉ ุงูุจุญุซ
3. ุฑุงุฌุน logs ุงูุฎุงุฏู ููุฃุฎุทุงุก
4. ุชุฃูุฏ ูู ุตูุงุญูุงุช ุงููุณุชุฎุฏู

---

**ุขุฎุฑ ุชุญุฏูุซ:** 2025-11-04
**ุงูุฅุตุฏุงุฑ:** 2.0
**ุงูุญุงูุฉ:** โ ููุชูู ููุฎุชุจุฑ
