# ๐ ุชูุซูู ุตูุญุงุช ุฅุถุงูุฉ ูุชุนุฏูู ุงููุณุชุฎุฏููู

## โ ุชู ุฅูุฌุงุฒู

ุชู ุฅูุดุงุก ูุชุญุฏูุซ ุตูุญุงุช ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ุจุงููุงูู ูุฑุจุทูุง ุจุงูู Backend.

---

## ๐ ุงูุตูุญุงุช ุงููุชุงุญุฉ

### 1. ุตูุญุฉ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู โ
**ุงููุณุงุฑ:** `/dashboard/manage-users`
**ุงูููู:** `ManageUsersPage.tsx`

**ุงููุธุงุฆู:**
- โ ุนุฑุถ ุฌููุน ุงููุณุชุฎุฏููู
- โ ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช
- โ ุงูุจุญุซ ูู ุงููุณุชุฎุฏููู
- โ ุชุบููุฑ ุญุงูุฉ ุงููุณุชุฎุฏู (Active/Inactive/Suspended)
- โ ุญุฐู ูุณุชุฎุฏู
- โ ุงูุชููู ูุตูุญุฉ ุงูุฅุถุงูุฉ
- โ ุงูุชููู ูุตูุญุฉ ุงูุชุนุฏูู

---

### 2. ุตูุญุฉ ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ โ
**ุงููุณุงุฑ:** `/dashboard/manage-users/add`
**ุงูููู:** `AddUserPage.tsx`

**ุงูุญููู ุงููุทููุจุฉ (Required):**
- โ ุงูุงุณู ุงููุงูู
- โ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- โ ูููุฉ ุงููุฑูุฑ (8 ุฃุญุฑู ุนูู ุงูุฃูู)
- โ ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ
- โ ุงูุฏูุฑ (ุจุงุญุซ/ูุญูู/ูุญุฑุฑ)
- โ ุงูุงูุชูุงุก ุงููุคุณุณู

**ุงูุญููู ุงูุงุฎุชูุงุฑูุฉ (Optional):**
- โ ุฑูู ุงููุงุชู
- โ ุงููุณู
- โ ุงูุชุฎุตุต
- โ ุงูุฏุฑุฌุฉ ุงูุนูููุฉ

**ุงููุธุงุฆู:**
- โ Validation ููููุฉ ุงููุฑูุฑ
- โ ุงูุชุญูู ูู ุชุทุงุจู ูููุฉ ุงููุฑูุฑ
- โ ุฅุฑุณุงู ุงูุจูุงูุงุช ููู Backend
- โ ุนุฑุถ ุฑุณุงุฆู ุงููุฌุงุญ/ุงูุฎุทุฃ
- โ Loading state ุฃุซูุงุก ุงูุฅุถุงูุฉ
- โ ุงูุชููู ุงูุชููุงุฆู ุจุนุฏ ุงููุฌุงุญ

---

### 3. ุตูุญุฉ ุชุนุฏูู ุงููุณุชุฎุฏู โ (ุฌุฏูุฏ!)
**ุงููุณุงุฑ:** `/dashboard/manage-users/:id/edit`
**ุงูููู:** `EditUserPage.tsx`

**ุงูุญููู ุงููุชุงุญุฉ:**
- โ ุงูุงุณู ุงููุงูู
- โ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- โ ุงูุฏูุฑ (ุจุงุญุซ/ูุญูู/ูุญุฑุฑ/ูุฏูุฑ)
- โ ุงูุญุงูุฉ (ูุดุท/ุบูุฑ ูุดุท/ูุนูู)
- โ ุงูุงูุชูุงุก ุงููุคุณุณู
- โ ุฑูู ุงููุงุชู
- โ ุงููุณู
- โ ุงูุชุฎุตุต
- โ ุงูุฏุฑุฌุฉ ุงูุนูููุฉ

**ุงููุธุงุฆู:**
- โ ุฌูุจ ุจูุงูุงุช ุงููุณุชุฎุฏู ูู Backend
- โ Loading state ุฃุซูุงุก ุงูุชุญููู
- โ ุชุญุฏูุซ ุงูุจูุงูุงุช ูู Backend
- โ ุนุฑุถ ุฑุณุงุฆู ุงููุฌุงุญ/ุงูุฎุทุฃ
- โ Loading state ุฃุซูุงุก ุงูุญูุธ
- โ ุงูุชููู ุงูุชููุงุฆู ุจุนุฏ ุงููุฌุงุญ

**ููุงุญุธุฉ:** ูุง ูููู ุชุบููุฑ ูููุฉ ุงููุฑูุฑ ูู ูุฐู ุงูุตูุญุฉ (ุฃูุงู)

---

## ๐จ ุงูุญููู ุงูุชูุตูููุฉ

### ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ

#### 1. ุงูุงุณู ุงููุงูู
- **ุงูููุน:** Text
- **ูุทููุจ:** ูุนู
- **ูุซุงู:** "ุฏ. ุฃุญูุฏ ูุญูุฏ ุงูุณุงูู"

#### 2. ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- **ุงูููุน:** Email
- **ูุทููุจ:** ูุนู
- **Validation:** ูุฌุจ ุฃู ูููู ุจุฑูุฏ ุฅููุชุฑููู ุตุญูุญ
- **ูุซุงู:** "ahmed.mohamed@university.edu"

#### 3. ูููุฉ ุงููุฑูุฑ (ุฅุถุงูุฉ ููุท)
- **ุงูููุน:** Password
- **ูุทููุจ:** ูุนู
- **Validation:** 8 ุฃุญุฑู ุนูู ุงูุฃูู
- **ููุงุญุธุฉ:** ูุชู ุชุดููุฑูุง ูู Backend

#### 4. ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ (ุฅุถุงูุฉ ููุท)
- **ุงูููุน:** Password
- **ูุทููุจ:** ูุนู
- **Validation:** ูุฌุจ ุฃู ุชุทุงุจู ูููุฉ ุงููุฑูุฑ

#### 5. ุงูุฏูุฑ
- **ุงูููุน:** Select
- **ูุทููุจ:** ูุนู
- **ุงูุฎูุงุฑุงุช:**
  - ุจุงุญุซ (researcher)
  - ูุญูู (reviewer)
  - ูุญุฑุฑ (editor)
  - ูุฏูุฑ (admin) - ุชุนุฏูู ููุท

#### 6. ุงูุญุงูุฉ (ุชุนุฏูู ููุท)
- **ุงูููุน:** Select
- **ูุทููุจ:** ูุนู
- **ุงูุฎูุงุฑุงุช:**
  - ูุดุท (active)
  - ุบูุฑ ูุดุท (inactive)
  - ูุนูู (suspended)

---

### ุงููุนูููุงุช ุงูุฅุถุงููุฉ

#### 7. ุงูุงูุชูุงุก ุงููุคุณุณู
- **ุงูููุน:** Text
- **ูุทููุจ:** ูุนู (ุฅุถุงูุฉ) / ูุง (ุชุนุฏูู)
- **ูุซุงู:** "ุฌุงูุนุฉ ุงูููู ุณุนูุฏ"

#### 8. ุฑูู ุงููุงุชู
- **ุงูููุน:** Tel
- **ูุทููุจ:** ูุง
- **ูุซุงู:** "+966 50 123 4567"

#### 9. ุงููุณู
- **ุงูููุน:** Text
- **ูุทููุจ:** ูุง
- **ูุซุงู:** "ูุณู ุนููู ุงูุญุงุณุจ"

#### 10. ุงูุชุฎุตุต
- **ุงูููุน:** Text
- **ูุทููุจ:** ูุง
- **ูุซุงู:** "ุงูุฐูุงุก ุงูุงุตุทูุงุนูุ ุงูุชุนูู ุงูุขูู"

#### 11. ุงูุฏุฑุฌุฉ ุงูุนูููุฉ
- **ุงูููุน:** Select
- **ูุทููุจ:** ูุง
- **ุงูุฎูุงุฑุงุช:**
  - ุจูุงููุฑููุณ (bachelor)
  - ูุงุฌุณุชูุฑ (master)
  - ุฏูุชูุฑุงู (phd)
  - ุฃุณุชุงุฐ ูุณุงุนุฏ (assistant-professor)
  - ุฃุณุชุงุฐ ูุดุงุฑู (associate-professor)
  - ุฃุณุชุงุฐ (professor)

---

## ๐ ุชุฏูู ุงูุนูู

### ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ

```
1. ุงููุณุชุฎุฏู ูุถุบุท "ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ"
   โ
2. ุงูุชููู ุฅูู /dashboard/manage-users/add
   โ
3. ููุก ุงููููุฐุฌ
   โ
4. ุงูุถุบุท ุนูู "ุฅุถุงูุฉ ุงููุณุชุฎุฏู"
   โ
5. Validation ูู Frontend
   โ
6. ุฅุฑุณุงู ุงูุจูุงูุงุช ุฅูู Backend
   POST /api/users
   โ
7. Backend ูุชุญูู ูู ุงูุจูุงูุงุช
   โ
8. Backend ูุดูุฑ ูููุฉ ุงููุฑูุฑ
   โ
9. Backend ูุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
   โ
10. Response ูุฑุฌุน
   โ
11. ุนุฑุถ ุฑุณุงูุฉ ูุฌุงุญ
   โ
12. ุงูุชููู ุฅูู /dashboard/manage-users
```

### ุชุนุฏูู ูุณุชุฎุฏู

```
1. ุงููุณุชุฎุฏู ูุถุบุท ุฒุฑ "ุชุนุฏูู" (โ๏ธ)
   โ
2. ุงูุชููู ุฅูู /dashboard/manage-users/:id/edit
   โ
3. ุฌูุจ ุจูุงูุงุช ุงููุณุชุฎุฏู ูู Backend
   GET /api/users/:id
   โ
4. ููุก ุงููููุฐุฌ ุจุงูุจูุงูุงุช ุงูุญุงููุฉ
   โ
5. ุชุนุฏูู ุงูุจูุงูุงุช ุงููุทููุจุฉ
   โ
6. ุงูุถุบุท ุนูู "ุญูุธ ุงูุชุบููุฑุงุช"
   โ
7. ุฅุฑุณุงู ุงูุจูุงูุงุช ุฅูู Backend
   PATCH /api/users/:id
   โ
8. Backend ูุญุฏุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช
   โ
9. Response ูุฑุฌุน
   โ
10. ุนุฑุถ ุฑุณุงูุฉ ูุฌุงุญ
   โ
11. ุงูุชููู ุฅูู /dashboard/manage-users
```

---

## ๐ฏ Validation Rules

### Frontend Validation

#### ูููุฉ ุงููุฑูุฑ:
```typescript
- ุงูุทูู: 8 ุฃุญุฑู ุนูู ุงูุฃูู
- ุงูุชุทุงุจู: ูุฌุจ ุฃู ุชุทุงุจู ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ
```

#### ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:
```typescript
- ุงูููุน: email format
- ูุฑูุฏ: ูุชุญูู Backend
```

#### ุงูุญููู ุงููุทููุจุฉ:
```typescript
- name: required
- email: required
- password: required (ุฅุถุงูุฉ ููุท)
- role: required
- affiliation: required (ุฅุถุงูุฉ ููุท)
```

### Backend Validation

ูุชู ูู `CreateUserDto` ู `UpdateUserDto`:
```typescript
- Email: ูุฌุจ ุฃู ูููู ุตุญูุญ ููุฑูุฏ
- Password: 8 ุฃุญุฑู ุนูู ุงูุฃูู
- Role: ูุฌุจ ุฃู ูููู ูู ุงูููู ุงููุณููุญุฉ
- Status: ูุฌุจ ุฃู ูููู ูู ุงูููู ุงููุณููุญุฉ
```

---

## ๐ ุงูุฃูุงู

### 1. ูููุฉ ุงููุฑูุฑ
- โ ูุง ูุชู ุนุฑุถูุง ูู ุฃู ุงุณุชุฌุงุจุฉ ูู Backend
- โ ูุชู ุชุดููุฑูุง ุจุงุณุชุฎุฏุงู bcrypt
- โ ูุง ูููู ุชุนุฏูููุง ูู ุตูุญุฉ ุงูุชุนุฏูู

### 2. ุงูุตูุงุญูุงุช
- โ ููุท Admin ููููู ุงููุตูู ููุฐู ุงูุตูุญุงุช
- โ ูุชู ุงูุชุญูู ูู Frontend (ProtectedRoute)
- โ ูุชู ุงูุชุญูู ูู Backend (Guards)

### 3. ุงูุจูุงูุงุช
- โ ูุชู ุฅุฑุณุงู Token ูุน ูู ุทูุจ
- โ ูุชู ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ูู Backend
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุจุฏูู ูุดู ูุนูููุงุช ุญุณุงุณุฉ

---

## ๐ API Endpoints ุงููุณุชุฎุฏูุฉ

### 1. ุฅุถุงูุฉ ูุณุชุฎุฏู
```
POST /api/users

Body:
{
  "name": "string",
  "email": "string",
  "password": "string",
  "role": "researcher" | "reviewer" | "editor",
  "affiliation": "string",
  "phone": "string?",
  "department": "string?",
  "specialization": "string?",
  "academic_degree": "string?"
}

Response: 201 Created
{
  "id": "uuid",
  "name": "string",
  "email": "string",
  "role": "string",
  "status": "active",
  "created_at": "date",
  // ... ุจุงูู ุงูุญููู (ุจุฏูู password)
}
```

### 2. ุฌูุจ ุจูุงูุงุช ูุณุชุฎุฏู
```
GET /api/users/:id

Response: 200 OK
{
  "id": "uuid",
  "name": "string",
  "email": "string",
  "role": "string",
  "status": "string",
  // ... ุจุงูู ุงูุญููู
}
```

### 3. ุชุญุฏูุซ ูุณุชุฎุฏู
```
PATCH /api/users/:id

Body:
{
  "name": "string?",
  "email": "string?",
  "role": "string?",
  "status": "string?",
  "affiliation": "string?",
  // ... ุฃู ุญููู ุฃุฎุฑู
}

Response: 200 OK
{
  // ุจูุงูุงุช ุงููุณุชุฎุฏู ุงููุญุฏุซุฉ
}
```

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ ุตูุญุฉ ุงูุฅุถุงูุฉ

#### Test 1: ุฅุถุงูุฉ ูุณุชุฎุฏู ุจูุฌุงุญ โ
```
1. ุงููุฃ ุฌููุน ุงูุญููู ุงููุทููุจุฉ
2. ุงุถุบุท "ุฅุถุงูุฉ ุงููุณุชุฎุฏู"
3. ูุฌุจ ุฃู ุชุฑู ุฑุณุงูุฉ ูุฌุงุญ
4. ูุฌุจ ุฃู ุชูุชูู ูุตูุญุฉ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
5. ูุฌุจ ุฃู ุชุฑู ุงููุณุชุฎุฏู ุงูุฌุฏูุฏ ูู ุงููุงุฆูุฉ
```

#### Test 2: ูููุฉ ูุฑูุฑ ุบูุฑ ูุชุทุงุจูุฉ โ
```
1. ุงููุฃ ุงููููุฐุฌ
2. ุงุฌุนู ูููุฉ ุงููุฑูุฑ ูุชุฃููุฏูุง ูุฎุชูููู
3. ุงุถุบุท "ุฅุถุงูุฉ ุงููุณุชุฎุฏู"
4. ูุฌุจ ุฃู ุชุฑู ุฑุณุงูุฉ ุฎุทุฃ
```

#### Test 3: ุจุฑูุฏ ุฅููุชุฑููู ููุฑุฑ โ
```
1. ุงููุฃ ุงููููุฐุฌ ุจุจุฑูุฏ ููุฌูุฏ ูุณุจูุงู
2. ุงุถุบุท "ุฅุถุงูุฉ ุงููุณุชุฎุฏู"
3. ูุฌุจ ุฃู ุชุฑู ุฑุณุงูุฉ ุฎุทุฃ ูู Backend
```

### ุงุฎุชุจุงุฑ ุตูุญุฉ ุงูุชุนุฏูู

#### Test 1: ุชุญุฏูุซ ุจูุงูุงุช ูุณุชุฎุฏู โ
```
1. ุงุถุบุท ุฒุฑ "ุชุนุฏูู" ูุฃู ูุณุชุฎุฏู
2. ุนุฏู ุจุนุถ ุงูุญููู
3. ุงุถุบุท "ุญูุธ ุงูุชุบููุฑุงุช"
4. ูุฌุจ ุฃู ุชุฑู ุฑุณุงูุฉ ูุฌุงุญ
5. ูุฌุจ ุฃู ุชุฑู ุงูุชุบููุฑุงุช ูู ุงููุงุฆูุฉ
```

#### Test 2: ุชุบููุฑ ุงูุญุงูุฉ โ
```
1. ุงูุชุญ ุตูุญุฉ ุงูุชุนุฏูู
2. ุบูุฑ ุงูุญุงูุฉ ูู "ูุดุท" ุฅูู "ุบูุฑ ูุดุท"
3. ุงุญูุธ
4. ูุฌุจ ุฃู ุชุชุบูุฑ ุงูุญุงูุฉ ูู ุงููุงุฆูุฉ
```

---

## ๐ก ูุตุงุฆุญ ูููุทูุฑูู

### 1. ุฅุถุงูุฉ ุญููู ุฌุฏูุฏุฉ
```typescript
// 1. ุฃุถู ุงูุญูู ูู formData
const [formData, setFormData] = useState({
  // ... ุงูุญููู ุงูููุฌูุฏุฉ
  newField: '',
});

// 2. ุฃุถู ุงูุญูู ูู userData
const userData = {
  // ... ุงูุญููู ุงูููุฌูุฏุฉ
  newField: formData.newField || undefined,
};

// 3. ุฃุถู input ูู JSX
<input
  value={formData.newField}
  onChange={(e) => setFormData({ ...formData, newField: e.target.value })}
/>
```

### 2. ุฅุถุงูุฉ Validation
```typescript
// ูู handleSubmit
if (!formData.email.includes('@')) {
  toast.error('ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุบูุฑ ุตุญูุญ');
  return;
}
```

### 3. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
```typescript
try {
  await usersService.create(userData);
  toast.success('ุชู ุจูุฌุงุญ');
} catch (err: any) {
  // Backend error message
  const errorMessage = err.message || 'ุญุฏุซ ุฎุทุฃ';
  toast.error(errorMessage);
}
```

---

## ๐ ุงูุฎูุงุตุฉ

ุชู ุฅูุดุงุก ูุธุงู ูุงูู ูุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ูุน:

- โ **ุตูุญุฉ ุฅุถุงูุฉ** ูุงููุฉ ููุชุตูุฉ ุจุงูู Backend
- โ **ุตูุญุฉ ุชุนุฏูู** ูุงููุฉ ููุชุตูุฉ ุจุงูู Backend
- โ **Validation** ุดุงูู ูู Frontend ู Backend
- โ **Error Handling** ูุชูุฏู
- โ **Loading States** ูุงุถุญุฉ
- โ **User Experience** ููุชุงุฒุฉ
- โ **Security** ูุญูู

**ุฌููุน ุงูุตูุญุงุช ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู! ๐**
